<!DOCTYPE html>
<html>  
<head>
<title>To Doooo</title>    
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style type = "text/css" media = "all">

body{
    text-align: center;
}
.things {
  list-style: none;
  text-decoration: none;
    
}
.things input {
    display: none;
}
.things input + label:before {
    content: "ğŸ“";
}
.things input:checked + label:before {
    content: "ğŸ•";

}
</style>

<div class="wrapper">
    <h2>TO DO</h2>
    <p></p>
    <ul class="things">
      <li>Loading list...</li>
    </ul>
    <form class="add-items">
      <input type="text" name="item" placeholder="Item Name" required>
      <input type="submit" value="+ Add Item">
    </form>
  </div>

<script>
  const addItems = document.querySelector('.add-items');
  const itemsList = document.querySelector('.things');
  const items = JSON.parse(localStorage.getItem("items")) || [];

  function addItem(e) {
    e.preventDefault();
    const text = (this.querySelector("[name=item]")).value;
    const item = {
            text,
            done: false
      
    }
    items.push(item);
    populateList(items, itemsList)
    localStorage.setItem("items", JSON.stringify(items));
    this.reset();
  }
  function populateList(things = [], thingList){
      thingList.innerHTML = things.map( (thing, i) =>{
            return ` 
            <li>
                <input type= "checkbox" data-index=${i} id="item${i}" ${thing.done ? "checked" : ""}/>
                <label for="item${i}">${thing.text}</label>
            </li>
            `
      }).join("");


  }

  addItems.addEventListener("submit", addItem);
  populateList(items, itemsList);   
</script>
</body>

</html>